<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Cyber Risk Dashboard</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        /* This hides the spinner by default */
        #loading-section { display: none; }
    </style>
</head>
<body class="p-5 bg-dark text-white">

    <div class="container bg-secondary p-4 rounded shadow">
        <h1>üîç Security Scanner Tool</h1>
        <p>Enter an IP address to check for business risks.</p>
        
        <form method="POST" onsubmit="showLoading()">
            <input type="text" name="target_ip" class="form-control mb-3" placeholder="e.g. scanme.nmap.org" required>
            <button type="submit" class="btn btn-warning w-100" id="scan-btn">Run Kali Scan</button>
        </form>

        <div id="loading-section" class="text-center mt-4">
            <div class="spinner-border text-warning" role="status"></div>
            <p class="mt-2">Kali is analyzing the network... please wait.</p>
        </div>

        {% if results %}
        <div class="mt-4 p-3 bg-light text-dark rounded">
            <h3>Findings:</h3>
            <ul>
                {% for line in results %}
                <li class="text-danger"><strong>Vulnerability Found:</strong> {{ line }}</li>
                {% endfor %}
            </ul>
        </div>
        {% endif %}
    </div>

    <script>
        function showLoading() {
            // Hide the button and show the spinner when clicked
            document.getElementById('scan-btn').style.display = 'none';
            document.getElementById('loading-section').style.display = 'block';
        }
    </script>
</body>
</html>
